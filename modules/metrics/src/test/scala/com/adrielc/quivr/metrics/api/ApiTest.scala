package com.adrielc.quivr.metrics.api

//import com.adrielc.quivr.metrics.MyEngagement
//import com.adrielc.quivr.metrics.MyEngagement.{Click, Purchase}
//import eu.timepit.refined.auto._
import org.scalatest.{FlatSpec, Matchers}

class ApiTest extends FlatSpec with Matchers {


  "Api" should "work" in {

//    val eval = evaluator(
//      (count(Click: MyEngagement), count(Purchase: MyEngagement))
//    )(
//      f1, ndcg, avgPrecision,
//    )(
//      10, 20, 30
//    )
//
//    val results = eval(
//      1L to 60,
//      Map(
//        2L -> Map((Click: MyEngagement) -> 1),
//        53L -> Map((Click: MyEngagement) -> 1),
//        40L -> Map((Purchase: MyEngagement) -> 2),
//        46L -> Map((Purchase: MyEngagement) -> 6)
//      )
//    )
//
//    assert(results == Map(
//      "click.ndcg.@20" -> 0.6309297535714574,
//      "click.ap.@20" -> 0.5,
//      "click.f1.@10" -> 0.16666666666666669,
//      "click.ap.@10" -> 0.5,
//      "click.ndcg.@30" -> 0.6309297535714574,
//      "click.ap.@30" -> 0.5,
//      "click.f1.@20" -> 0.09090909090909091,
//      "click.ndcg.@10" -> 0.6309297535714574,
//      "click.f1.@30" -> 0.0625
//    ))
  }
}
